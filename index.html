<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025í•™ë…„ë„ ë‹¤ë©´í‰ê°€(ì •ëŸ‰í‰ê°€í‘œ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-database-compat.js"></script>
    <!-- html2canvas for screenshot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 0.9rem;
            color: #666;
        }

        .evaluation-form {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }

        .evaluation-item {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }

        .evaluation-item h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 15px;
        }

        .score-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .score-option {
            text-align: center;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .score-option:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .score-option.selected {
            border-color: #3b82f6;
            background: #3b82f6;
            color: white;
        }

        .score-option input[type="radio"] {
            display: none;
        }

        .score-label {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .score-value {
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 5px;
        }

        .total-score {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 30px;
        }

        .total-score h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .total-score .score {
            font-size: 3rem;
            font-weight: 700;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #047857 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .evaluator-info {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .progress-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* í…Œì´ë¸” ì»¬ëŸ¼ ë„ˆë¹„ ì¡°ì • */
        td:nth-child(1) { width: 7% !important; }  /* í‰ê°€ìš”ì†Œ */
        td:nth-child(2) { width: 7% !important; }  /* í‰ê°€ê¸°ì¤€ */
        td:nth-child(3) { width: 10% !important; }   /* ì‹œìˆ˜ */
        td:nth-child(4) { width: 10% !important; }   /* ì ìˆ˜ */
        td:nth-child(5) { width: 10% !important; }   /* ì‹œìˆ˜ */
        td:nth-child(6) { width: 10% !important; }   /* ì ìˆ˜ */
        td:nth-child(7) { width: 26% !important; }  /* í‰ê°€ë‚´ìš© ì„¸ë¶€ì„¤ëª… */
        td:nth-child(8) { width: 10% !important; }  /* ê¸°ì¤€ë³„ */
        td:nth-child(9) { width: 10% !important; }  /* ìš”ì†Œë³„ */

        /* êµìœ¡í™œë™ í™œì„±í™” í‘œ ì»¬ëŸ¼ ë„ˆë¹„ ì¡°ì • */
        .education-table td:nth-child(1) { width: 15% !important; }  /* êµ¬ë¶„ */
        .education-table td:nth-child(2) { width: 67% !important; }  /* ë‚´ìš© */
        .education-table td:nth-child(3) { width: 18% !important; }  /* ì ìˆ˜ */

        /* í•´ë‹¹ì˜ì—­ì ìˆ˜ ì¹¸ ê¸€ì í¬ê¸° ì¡°ì • */
        #learningResult, #multiGradeResult, #classOpenResult,
        #lifeGuidanceResult, #violencePreventionResult, #professionalDevResult,
        #workPerformanceResult, #subjectWorkResult, #workDifficultyResult, #committeeWorkResult,
        #learningTotalResult, #lifeGuidanceTotalResult, #professionalDevTotalResult, #assignedWorkTotalResult, #overallGrandTotal {
            font-size: 20px !important;
            font-weight: bold !important;
        }




    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="flex justify-between items-center mb-4">
                <h1>2025í•™ë…„ë„ ë‹¤ë©´í‰ê°€(ì •ëŸ‰í‰ê°€í‘œ)</h1>
                <div class="flex gap-2 items-center">
                    <div id="connectionStatus" class="px-3 py-1 rounded text-sm font-medium">
                        ğŸ”´ ì—°ê²° ì•ˆë¨
                    </div>
                    <button class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm" onclick="showFirebaseSettings()">
                        âš™ï¸ Firebase ì„¤ì •
                    </button>
                    <button class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700" onclick="captureScreenshot()">
                        ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ì €ì¥
                    </button>
                    <button id="submitBtn" class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700" onclick="submitEvaluation()">
                        ğŸ“¤ í‰ê°€ ì œì¶œí•˜ê¸°
                    </button>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-8 mt-4">
                <div class="flex items-center">
                    <label for="teacherSubject" class="text-sm font-medium text-gray-700 mr-2">ë°œë ¹êµê³¼ :</label>
                    <input type="text" id="teacherSubject" class="flex-1 p-2 border border-gray-300 rounded text-center">
                </div>
                <div class="flex items-center">
                    <label for="teacherDepartment" class="text-sm font-medium text-gray-700 mr-2">ë¶€ì„œ :</label>
                    <select id="teacherDepartment" class="flex-1 p-2 border border-gray-300 rounded text-center">
                        <option value="">ë¶€ì„œ ì„ íƒ</option>
                        <option value="êµë¬´ê¸°íšë¶€">êµë¬´ê¸°íšë¶€</option>
                        <option value="ë¯¸ë˜êµìœ¡ì—°êµ¬ë¶€">ë¯¸ë˜êµìœ¡ì—°êµ¬ë¶€</option>
                        <option value="ìƒí™œì•ˆì „ì¸ê¶Œë¶€">ìƒí™œì•ˆì „ì¸ê¶Œë¶€</option>
                        <option value="ì§„ë¡œìƒë‹´ë¶€">ì§„ë¡œìƒë‹´ë¶€</option>
                        <option value="í•™ìƒìì¹˜ë¶€">í•™ìƒìì¹˜ë¶€</option>
                        <option value="ê³¼í•™ì •ë³´ë¶€">ê³¼í•™ì •ë³´ë¶€</option>
                        <option value="ì¸ë¬¸ë³µì§€ë¶€">ì¸ë¬¸ë³µì§€ë¶€</option>
                        <option value="êµìœ¡ê³¼ì •ë¶€">êµìœ¡ê³¼ì •ë¶€</option>
                        <option value="ë¬¸í™”ì˜ˆìˆ ì²´ìœ¡ë¶€">ë¬¸í™”ì˜ˆìˆ ì²´ìœ¡ë¶€</option>
                        <option value="1í•™ë…„ë¶€">1í•™ë…„ë¶€</option>
                        <option value="2í•™ë…„ë¶€">2í•™ë…„ë¶€</option>
                        <option value="3í•™ë…„ë¶€">3í•™ë…„ë¶€</option>
                    </select>
                </div>
                <div class="flex items-center">
                    <label for="teacherName" class="text-sm font-medium text-gray-700 mr-2">ì„±ëª… :</label>
                    <input type="text" id="teacherName" class="flex-1 p-2 border border-gray-300 rounded text-center">
                </div>
            </div>
        </div>

        <div class="evaluation-form">
            <div class="overflow-x-auto">
                <table class="w-full border-collapse border border-gray-400 text-sm">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-400 p-2 text-center font-bold" rowspan="2">í‰ê°€ìš”ì†Œ</th>
                            <th class="border border-gray-400 p-2 text-center font-bold" rowspan="2">í‰ê°€ê¸°ì¤€</th>
                            <th class="border border-gray-400 p-2 text-center font-bold" colspan="4">ì ìˆ˜</th>
                            <th class="border border-gray-400 p-2 text-center font-bold" rowspan="2">í‰ê°€ë‚´ìš© ì„¸ë¶€ì„¤ëª…</th>
                            <th class="border border-gray-400 p-1 text-center font-bold text-base" colspan="2">í•´ë‹¹ì˜ì—­ì ìˆ˜</th>
                        </tr>
                        <tr class="bg-gray-50">
                            <th class="border border-gray-400 p-1 text-center font-bold text-xs" style="width: 7%">ì‹œìˆ˜</th>
                            <th class="border border-gray-400 p-1 text-center font-bold text-xs" style="width: 7%">ì ìˆ˜</th>
                            <th class="border border-gray-400 p-1 text-center font-bold text-xs" style="width: 7%">ì‹œìˆ˜</th>
                            <th class="border border-gray-400 p-1 text-center font-bold text-xs" style="width: 7%">ì ìˆ˜</th>
                            <th class="border border-gray-400 p-1 text-center font-bold text-xs">ê¸°ì¤€ë³„</th>
                            <th class="border border-gray-400 p-1 text-center font-bold text-xs">ìš”ì†Œë³„</th>
                        </tr>
                    </thead>
                    <tbody id="evaluationTableBody">
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-blue-50" rowspan="3">â‘ <br>í•™ìŠµì§€ë„<br>(30ì )</td>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-blue-50">ìˆ˜ì—…ì‹œìˆ˜</td>
                            <td class="border border-gray-400 p-2 text-left text-base align-middle" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="24">24
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="23">23
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="22">22
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="21">21
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="20">20
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="19">19
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="18">18
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center text-base align-middle">
                                <div class="border-b border-gray-300 pb-1 mb-1">20</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">19.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">19</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">18.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">18</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">17.5</div>
                                <div>17</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-base align-middle">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="17">17
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="16">16
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="15">15
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="14">14
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="13">13
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="12">12
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="1" data-hours="11">11
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center text-base align-middle">
                                <div class="border-b border-gray-300 pb-1 mb-1">16.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">16</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">15.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">15</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">14.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">14</div>
                                <div>13.5</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* í•™ê¸°ì´ˆ ì‘ì„±ëœ "êµê³¼ë³„ ì‹œìˆ˜ë°°ë‹¹í‘œ" ìƒì˜ ì‹œìˆ˜</strong><br>
                                - ìˆ˜ì—…ì‹œìˆ˜ = êµê³¼+ìŠ¤í¬ì¸ +ë™ì•„ë¦¬+ìˆœíšŒ+ììœ í•™ê¸°ì‹œìˆ˜+ì°½ì²´ììœ¨+ê¸°íšíšŒì˜<br>
                                <strong>* 1,2í•™ê¸° ì‹œìˆ˜ê°€ ë‹¤ë¥¼ ê²½ìš° í‰ê· ì‹œìˆ˜ì˜ ì¤‘ê°„ ì ìˆ˜ ë°˜ì˜</strong><br>
                                <strong>* ê°•ì‚¬í˜‘ë ¥ìˆ˜ì—…(ììœ í•™ê¸°, ìŠ¤í¬ì¸  ë“±)ì€ 0.5ì‹œìˆ˜ ì¸ì •</strong><br>
                                <strong>* ê°•ì‚¬ë‹¨ë…ìˆ˜ì—… ì¸ì •í•˜ì§€ì•ŠìŒ</strong><br>
                                <strong>* ìˆœíšŒêµì‚¬ + 2ì‹œìˆ˜ ë°˜ì˜</strong><br>
                                <strong>* êµë¬´ë¶€ì¥(í‰ê· ì‹œìˆ˜) + 1ì‹œìˆ˜ ë°˜ì˜</strong><br>
                                <strong>* ì§„ë¡œì „ë‹´êµì‚¬ ë‹´ë‹¹ì‹œìˆ˜ê°€ í‰ê· ì‹œìˆ˜ ì´í•˜ì¸ ê²½ìš° êµê³¼êµì‚¬ í‰ê· ì‹œìˆ˜ ì¸ì •</strong><br>
                                <strong>* í•™êµí­ë ¥ ë‹´ë‹¹êµì‚¬ëŠ” ë³´ì¡°ê°•ì‚¬ ì‹œìˆ˜ í¬í•¨ ì¸ì •</strong><br>
                                <strong>* 6ê°œì›” ë¯¸ë§Œ ê·¼ë¬´ì â€“ í•œ í•™ê¸° ì ìš©</strong><br>
                                <strong>* 6ê°œì›” ì´ˆê³¼ ê·¼ë¬´ì(ìœ¡ì•„íœ´ì§ì œì™¸):</strong><br>
                                <strong>&nbsp;&nbsp;ì ìš©ì ìˆ˜-ë¯¸ê·¼ë¬´(15ì¼ì´ìƒ)ì›”ìˆ˜*0.2</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="learningResult"
                                     onclick="openScoreModal('learning')"
                                     style="cursor: pointer; min-height: 20px;"
                                     title="í´ë¦­í•˜ì—¬ ë¯¸ê·¼ë¬´ì›”ìˆ˜ ê°ì  ì ìš©">ì˜¤ë¥˜</div>
                                <div id="learningAdjustmentInfo" class="text-base text-gray-600 mt-1" style="display: none;"></div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold" rowspan="3">
                                <div id="learningTotalResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-blue-50">ë‹¤í•™ë…„<br>ì§€ë„</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="2" data-type="both">ë‘í•™ê¸° í•´ë‹¹
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="2" data-type="single">í•œí•™ê¸° í•´ë‹¹
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="2" data-type="none">ë¯¸í•´ë‹¹
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">4.5</div>
                                <div>4</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* ë™ì•„ë¦¬,ìŠ¤í¬ì¸ ,ììœ í•™ê¸°ëŠ” ë‹¤í•™ë…„ì— í¬í•¨ì‹œí‚¤ì§€ ì•ŠìŒ</strong><br>
                                <strong>* ìˆœíšŒì§€ë„ í¬í•¨</strong><br>
                                <strong>* í•œ í•™ê¸°ë§Œ í•´ë‹¹í•œ ê²½ìš° 4.5ì  ë¶€ì—¬</strong><br>
                                <strong>* í•™ë…„ ìˆ˜ì—…ì„ A, Bë¡œ ë‚˜ëˆ„ëŠ” êµê³¼ëŠ” ì œì™¸í•¨</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="multiGradeResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-blue-50">ìˆ˜ì—…ê³µê°œ</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="3" data-type="school">í•™êµëŒ€í‘œ ê³µê°œìˆ˜ì—…
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="3" data-type="internal">êµë‚´ëŒ€í‘œ ê³µê°œìˆ˜ì—…
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="3" data-type="parent">í•™ë¶€ëª¨ ê³µê°œìˆ˜ì—…
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="3" data-type="none">ë¯¸í•´ë‹¹
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">4.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">4.3</div>
                                <div>4</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* ìˆ˜ì—…ë‚˜ëˆ”(ì „ë¬¸ì í•™ìŠµê³µë™ì²´ ì œì•ˆ êµë‚´ ëŒ€í‘œìˆ˜ì—…)</strong><br>
                                <strong>* í•™êµëŒ€í‘œë¡œ ê³µê°œìˆ˜ì—…ì„ í•œ ê²½ìš°</strong><br>
                                <strong>* í•™ë¶€ëª¨ê³µê°œìˆ˜ì—…ì„ í•œ ê²½ìš°</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="classOpenResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-orange-50" rowspan="2">â‘¡<br>ìƒí™œì§€ë„<br>(30ì )</td>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-orange-50">ë‹´ì„<br>(20ì )</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="4" data-type="applicable">í•´ë‹¹
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="4" data-type="not_applicable">ë¯¸í•´ë‹¹
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">20</div>
                                <div>19</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* 12ê°œì›” ê¸°ì¤€</strong><br>
                                <strong>- ì›”ë³„ ì‚°ì¶œ, ë¯¸ê·¼ë¬´(15ì¼ì´ìƒ)ì›”ìˆ˜*0.1</strong><br>
                                <strong>* ë‹´ì„ ì¸ì‚¬ ë°œë ¹ ê¸°ì¤€</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="lifeGuidanceResult"
                                     onclick="openScoreModal('lifeGuidance')"
                                     style="cursor: pointer; min-height: 20px;"
                                     title="í´ë¦­í•˜ì—¬ ë¯¸ê·¼ë¬´ì›”ìˆ˜ ê°ì  ì ìš©">ì˜¤ë¥˜</div>
                                <div id="lifeGuidanceAdjustmentInfo" class="text-base text-gray-600 mt-1" style="display: none;"></div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold" rowspan="2">
                                <div id="lifeGuidanceTotalResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-orange-50">êµë‚´ì™¸<br>ì•ˆì „<br>ìƒí™œ<br>ì§€ë„<br>(10ì )</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="5" data-type="department_head">ìƒí™œì•ˆì „ì¸ê¶Œë¶€ì¥, í•™ë…„ë¶€ì¥
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="5" data-type="homeroom_violence">ë‹´ì„, í•™í­ë‹´ë‹¹
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="5" data-type="over_50">ê·¸ ì™¸ êµì‚¬(50%ì´ìƒ í•´ë‹¹ì)
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="5" data-type="under_50">ê·¸ ì™¸ êµì‚¬(50%ë¯¸ë§Œ í•´ë‹¹ì)
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">10</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">9.5</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">9</div>
                                <div>8.5</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* í•™ìƒìƒí™œì§€ë„(êµí†µì§€ë„, ê¸‰ì‹ì§€ë„)</strong><br>
                                <strong>* ë„ì„œê´€ì§€ë„, ì¶”ê°€ 0.2(ë¹„êµê³¼ë„ ì¶”ê°€ë¶€ì—¬)</strong><br>
                                <strong>* í•´ë‹¹ë¶€ì„œ ì¼ì§€ ë“±ì„ ë§Œë“¤ì–´ ì¶œì„ í™•ì¸</strong><br>
                                <strong>* ì¶”ì§„ì‹¤ì  ë¯¸ì¸ì •ê¸°ê°„: ì ìš©ì ìˆ˜ â€“ ë¯¸ê·¼ë¬´ì›”ìˆ˜Ã—0.2</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="violencePreventionResult"
                                     onclick="openScoreModal('violencePrevention')"
                                     style="cursor: pointer; min-height: 20px;"
                                     title="í´ë¦­í•˜ì—¬ ë„ì„œê´€ì§€ë„ ì¶”ê°€ì ìˆ˜ ë° ë¯¸ê·¼ë¬´ì›”ìˆ˜ ê°ì  ì ìš©">ì˜¤ë¥˜</div>
                                <div id="violencePreventionAdjustmentInfo" class="text-base text-gray-600 mt-1" style="display: none;"></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-teal-50">â‘¢<br>ì „ë¬¸ì„±<br>ê°œë°œ<br>(10ì )</td>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-teal-50">ê°œì¸<br>ì—°ìˆ˜<br>ì‹œê°„<br>(10ì )</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="6" data-type="over_60">60ì‹œê°„ì´ìƒ
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="6" data-type="45_to_60">45ì‹œê°„ì´ìƒ~ 60ì‹œê°„ë¯¸ë§Œ
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="6" data-type="30_to_45">30ì‹œê°„ì´ìƒ~ 45ì‹œê°„ë¯¸ë§Œ
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="6" data-type="under_30">30ì‹œê°„ë¯¸ë§Œ
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">10</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">9</div>
                                <div class="border-b border-gray-300 pb-1 mb-1">8</div>
                                <div>7</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* ë‚˜ì´ìŠ¤ ì—°ìˆ˜ ì¶œë ¥ ì œì¶œ</strong><br>
                                <strong>* ë‚˜ì´ìŠ¤ ë¯¸ê¸°ë¡ ì—°ìˆ˜ëŠ” ì´ìˆ˜ì¦ ì œì¶œ</strong><br>
                                <strong>* ì—°ìˆ˜ ì¸ì • ê¸°ê°„ì€ 2025.3.1.~ 2026.2.28.</strong><br>
                                <strong>ê²°ê³¼ë³´ê³  ê¸°ê°„ ì´í›„ ì—°ìˆ˜ì´ìˆ˜ëŠ” ì„ ë°˜ì˜(ì—°ìˆ˜ê¸°ê°„í™•ì¸)í•˜ê³  ì¶”í›„ ì´ìˆ˜ì¦ ë“± ì¦ë¹™ìë£Œë¥¼ ê°œë³„ ì œì¶œí•¨.</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="professionalDevResult">ì˜¤ë¥˜</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="professionalDevTotalResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-purple-50" rowspan="4">â‘£<br>ë‹´ë‹¹<br>ì—…ë¬´<br>(30ì )</td>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-purple-50">ì—…ë¬´<br>ì¶”ì§„<br>ì‹¤ì <br>(10ì )</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="7" data-type="department_head">ë¶€ì¥
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="7" data-type="not_applicable">ë¯¸í•´ë‹¹
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="border-b border-gray-300 pb-1 mb-1">10</div>
                                <div>9</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* ì—…ë¬´ì¶”ì§„ì‹¤ì  (10ì )</strong><br>
                                <strong>* 12ê°œì›” ê¸°ì¤€(ì›”ë³„ì‚°ì¶œ, 15ì¼ ë¯¸ë§Œì€ ì ˆì‚­)</strong><br>
                                <strong>* ë¶€ì¥ ì¸ì‚¬ ë°œë ¹ ê¸°ì¤€</strong><br>
                                <strong>* ì¶”ì§„ì‹¤ì  ë¯¸ì¸ì •ê¸°ê°„ :</strong><br>
                                <strong>&nbsp;&nbsp;ì ìš©ì ìˆ˜ â€“ë¯¸ê·¼ë¬´ ì›”ìˆ˜Ã—0.1</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="workPerformanceResult"
                                     onclick="openScoreModal('workPerformance')"
                                     style="cursor: pointer; min-height: 20px;"
                                     title="í´ë¦­í•˜ì—¬ ë¯¸ê·¼ë¬´ì›”ìˆ˜ ê°ì  ì ìš©">ì˜¤ë¥˜</div>
                                <div id="workPerformanceAdjustmentInfo" class="text-base text-gray-600 mt-1" style="display: none;"></div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold" rowspan="4">
                                <div id="assignedWorkTotalResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-purple-50">êµê³¼<br>ì—…ë¬´<br>(5ì )</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <span class="text-sm font-medium">ê¸°ë³¸ì ìˆ˜: 4ì </span>
                                </div>
                                <div class="border-b border-gray-300 pb-1 mb-1">
                                    <input type="checkbox" class="mr-2" data-group="8" data-type="club_teacher">ììœ¨ë™ì•„ë¦¬ ì§€ë„êµì‚¬ (+0.5)
                                </div>
                                <div>
                                    <input type="checkbox" class="mr-2" data-group="8" data-type="subject_head">êµê³¼ë¶€ì¥ (+0.5)
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="text-center">4 + ì¶”ê°€ì ìˆ˜</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* êµê³¼ì—…ë¬´ (5ì )</strong><br>
                                <strong>* êµê³¼ë¶€ì¥, ììœ¨ë™ì•„ë¦¬ì§€ë„êµì‚¬ ì¤‘ë³µì¸ì •</strong><br>
                                <strong>* ììœ¨ë™ì•„ë¦¬ ì§€ë„êµì‚¬ëŠ” í•™ìƒë“¤ì„ ì´ìˆ˜ì™„ë£Œ ì‹œì¼°ì„ ê²½ìš° ì¸ì •(ì¦ë¹™ìë£Œì²¨ë¶€)</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="subjectWorkResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-purple-50">ì—…ë¬´<br>ê³¤ë€ë„<br>(5ì )</td>
                            <td class="border border-gray-400 p-2" colspan="4">
                                <!-- 1-4ë‹¨ê³„ ë©”ì¸ ì„ íƒ -->
                                <div class="mb-4">
                                    <div class="border-b border-gray-300 pb-1 mb-1">
                                        <input type="checkbox" class="mr-2" data-group="9" data-type="level_1">í•´ë‹¹ì (5ì )
                                    </div>
                                    <div class="border-b border-gray-300 pb-1 mb-1">
                                        <input type="checkbox" class="mr-2" data-group="9" data-type="level_2">í•´ë‹¹ì (4.5ì )
                                    </div>
                                    <div class="border-b border-gray-300 pb-1 mb-1">
                                        <input type="checkbox" class="mr-2" data-group="9" data-type="level_3">í•´ë‹¹ì (4ì )
                                    </div>
                                    <div>
                                        <input type="checkbox" class="mr-2" data-group="9" data-type="level_4">ê¸°ë³¸ì ìˆ˜ (3.5ì )
                                    </div>
                                </div>

                                <!-- êµìœ¡í™œë™ í™œì„±í™” í‘œ -->
                                <table class="w-full border-collapse education-table">
                                    <tbody>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-center text-xs bg-blue-50 w-1/4">êµ¬ë¶„</td>
                                            <td class="border border-gray-300 p-1 text-center text-xs bg-blue-50" style="width: 57%;">ë‚´ìš©</td>
                                            <td class="border border-gray-300 p-1 text-center text-xs bg-blue-50" style="width: 18%;">ì ìˆ˜</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-center text-xs bg-green-50" rowspan="5">êµìœ¡í™œë™<br>í™œì„±í™”</td>
                                            <td class="border border-gray-300 p-1 text-xs">
                                                <label class="flex items-center cursor-pointer">
                                                    <input type="checkbox" class="mr-2" data-group="9_edu" data-type="school_award_1">
                                                    <span>í•™êµí‘œì°½ìœ ê³µêµì› 1</span>
                                                </label>
                                            </td>
                                            <td class="border border-gray-300 p-1 text-center text-xs">+0.2</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-xs">
                                                <label class="flex items-center cursor-pointer">
                                                    <input type="checkbox" class="mr-2" data-group="9_edu" data-type="school_award_2">
                                                    <span>í•™êµí‘œì°½ìœ ê³µêµì› 2</span>
                                                </label>
                                            </td>
                                            <td class="border border-gray-300 p-1 text-center text-xs">+0.2</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-xs">
                                                <label class="flex items-center cursor-pointer">
                                                    <input type="checkbox" class="mr-2" data-group="9_edu" data-type="external_project_1">
                                                    <span>ì™¸ë¶€ê¸°ê´€ê³µëª¨ì‚¬ì—… ì—…ë¬´ì¶”ì§„ë‹¨ 1</span>
                                                </label>
                                            </td>
                                            <td class="border border-gray-300 p-1 text-center text-xs">+0.2</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-xs">
                                                <label class="flex items-center cursor-pointer">
                                                    <input type="checkbox" class="mr-2" data-group="9_edu" data-type="external_project_2">
                                                    <span>ì™¸ë¶€ê¸°ê´€ê³µëª¨ì‚¬ì—… ì—…ë¬´ì¶”ì§„ë‹¨ 2</span>
                                                </label>
                                            </td>
                                            <td class="border border-gray-300 p-1 text-center text-xs">+0.2</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-xs">
                                                <label class="flex items-center cursor-pointer">
                                                    <input type="checkbox" class="mr-2" data-group="9_edu" data-type="pilot_school">
                                                    <span>ì„ ë„í•™êµ ì‹œë²”í•™êµ ë‹´ë‹¹ì</span>
                                                </label>
                                            </td>
                                            <td class="border border-gray-300 p-1 text-center text-xs">+0.5</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* ì—…ë¬´ê³¤ë€ë„ (5ì )</strong><br>
                                <strong>* 5ì :</strong> êµë¬´ë¶€ì¥, ì—°êµ¬ë¶€ì¥, í•™ìƒë¶€ì¥, í•™í­(ë‹´ì„)<br>
                                &nbsp;&nbsp;- í•™í­ì²˜ë¦¬ê±´ìˆ˜ 5íšŒ ì´ìƒ<br>
                                <strong>* 4.5ì :</strong> í†µí•©ë‹´ì„+ìˆœíšŒ / í•™í­ë‹´ë‹¹(ë¹„ë‹´ì„)<br>
                                &nbsp;&nbsp;- í•™í­ì²˜ë¦¬ê±´ìˆ˜ 5íšŒ ì´ìƒ<br>
                                <strong>* 4ì :</strong> í†µí•©í•™ê¸‰ë‹´ì„ / ìˆœíšŒêµì‚¬(ë‹´ì„ê²¸ì„)<br>
                                <strong>* 3.5ì :</strong> ë¯¸í•´ë‹¹<br>
                                <strong>* í•™êµí‘œì°½ ìœ ê³µêµì›/ì™¸ë¶€ê¸°ê´€ ê³µëª¨ì‚¬ì—…ì€ ìµœëŒ€ 2ê°œë¥¼ ë„˜ì§€ ì•ŠìŒ</strong><br>
                                &nbsp;&nbsp;(ê³„íšì„œì™€ ë³´ê³ ì„œ ì‘ì„±)<br>
                                &nbsp;&nbsp;ì˜ˆ) ë””ì§€í„¸ì„ ë„í•™êµ, 365+ì²´ìœ¡ì˜¨í™œë™ ë“±
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="workDifficultyResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-medium bg-purple-50">ê°ì¢…<br>ìœ„ì›íšŒ<br>í™œë™<br>(10ì )</td>
                            <td class="border border-gray-400 p-2 text-left" colspan="3">
                                <div class="mb-2">
                                    <span class="text-sm font-medium">ê¸°ë³¸ì ìˆ˜: 8.5ì </span>
                                </div>
                                <div class="border-b border-gray-300 pb-2 mb-2 flex items-center">
                                    <input type="checkbox" class="mr-2" data-group="10" data-type="committee_1">
                                    <input type="text" class="mr-2 border border-gray-300 rounded px-2 py-1 text-sm" style="width: 60%;" placeholder="ìœ„ì›íšŒëª… ì…ë ¥" maxlength="30">
                                    <span>(+0.5)</span>
                                </div>
                                <div class="border-b border-gray-300 pb-2 mb-2 flex items-center">
                                    <input type="checkbox" class="mr-2" data-group="10" data-type="committee_2">
                                    <input type="text" class="mr-2 border border-gray-300 rounded px-2 py-1 text-sm" style="width: 60%;" placeholder="ìœ„ì›íšŒëª… ì…ë ¥" maxlength="30">
                                    <span>(+0.5)</span>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" class="mr-2" data-group="10" data-type="committee_3">
                                    <input type="text" class="mr-2 border border-gray-300 rounded px-2 py-1 text-sm" style="width: 60%;" placeholder="ìœ„ì›íšŒëª… ì…ë ¥" maxlength="30">
                                    <span>(+0.5)</span>
                                </div>
                            </td>
                            <td class="border border-gray-400 p-2 text-center" colspan="1">
                                <div class="text-center">8.5 + ì¶”ê°€ì ìˆ˜</div>
                            </td>
                            <td class="border border-gray-400 p-2 text-left text-xs align-middle">
                                <strong>* ê°ì¢…ìœ„ì›íšŒ í™œë™ (10ì )</strong><br>
                                <strong>* ë‹¤ìŒì˜ ìœ„ì›íšŒì— ì†Œì†ëœ ìˆ˜ë¥¼ ê¸°ì…í•¨.</strong><br>
                                <strong>- ìœ„ì›íšŒë³„ 4íšŒì´ìƒ í˜‘ì˜(ì°¸ì„ì—¬ë¶€) í›„</strong><br>
                                <strong>&nbsp;&nbsp;&nbsp;ë‚´ë¶€ê²°ì¬ê°€ ìˆëŠ” ìœ„ì›íšŒ ìˆ˜ ì¸ì •</strong><br>
                                <strong>&nbsp;&nbsp;&nbsp;(ë‹¨, ìƒì¡°íšŒì„ì›ë‹¨ì€ ë³„ë„ë¡œ ìš´ì˜í•¨)</strong><br>
                                <strong>- ì¦ë¹™ì„œë¥˜ ë‹´ë‹¹ì ì†Œì† ìœ„ì› ë°°ë¶€ ê°œì¸ë³„ì œì¶œ</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold">
                                <div id="committeeWorkResult">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-center font-bold bg-gray-200" colspan="8">ê¸°íƒ€ì°¸ê³ ì‚¬í•­</td>
                            <td class="border border-gray-400 p-2 text-center font-bold bg-gray-200">
                                í•©ê³„
                            </td>
                        </tr>
                        <tr>
                            <td class="border border-gray-400 p-2 text-left text-xs" colspan="8" style="background-color: #f9fafb; line-height: 1.4;">
                                <strong>â€» ì ìˆ˜ì˜ ì´ì ì€ 100ì  ë§Œì ìœ¼ë¡œ ì ìš©í•œë‹¤.</strong><br>
                                <strong>â€» ë³´ê±´, ì‚¬ì„œ, ì „ë¬¸ìƒë‹´, ì˜ì–‘ ê³µëª¨ì‚¬ì—… : ì‹œë„ë‹¨ìœ„ ë° ì™¸ë¶€ ê³µëª¨ì‚¬ì—… ìš´ì˜(ê³„íšì„œ ë° ë³´ê³ ì„œ ì œì¶œ)</strong><br>
                                <strong>â€» ëª¨ë“  ì ìˆ˜ëŠ” ì†Œìˆ˜ ì…‹ì§¸ìë¦¬ì—ì„œ ë°˜ì˜¬ë¦¼í•˜ì—¬ ì†Œìˆ˜ ë‘˜ì§¸ìë¦¬ë¡œ ë‚˜íƒ€ëƒ„.</strong><br>
                                <strong>â€» ê°œì¸í‰ê°€ì˜ ì‚°ì •ê¸°ê°„ì€ 2025.03.01.~2026. 2.28.ê¹Œì§€ì„.(ê°œì¸ì—°ìˆ˜ì‹œê°„ ë³„ë„)</strong><br>
                                <strong>â€» ë™ì ì ì²˜ë¦¬ê¸°ì¤€ : ë‹¤ë©´í‰ê°€ ì •ëŸ‰í‰ê°€ ìš”ì†Œ ì¤‘ 1ìˆœìœ„ 'í•™ìŠµì§€ë„', 2ìˆœìœ„ 'ë‹´ë‹¹ì—…ë¬´, 3ìˆœìœ„ 'ìƒí™œì§€ë„', 4ìˆœìœ„ 'ì „ë¬¸ì„±ê°œë°œ' ì ìˆ˜ê°€ ë†’ì€ì, ê¸°ì¤€ì„ ëª¨ë‘ ê³ ë ¤í•˜ì˜€ìŒì—ë„ ë™ì ìê°€ ë°œìƒí•˜ëŠ” ê²½ìš° ì¶”í›„ ë‹¤ë©´í‰ê°€ ê´€ë¦¬ìœ„ì›íšŒë¥¼ ê°œìµœí•˜ì—¬ í˜‘ì˜í•¨.</strong><br>
                                <strong>* ìœ¡ì•„íœ´ì§ ê¸°ê°„ì€ ê·¼ë¬´ ì¼ìˆ˜ë¥¼ ì œì™¸í•˜ì—¬ ê°œì›” ìˆ˜ë¥¼ ì‚°ì •í•˜ì§€ ì•ŠìŒ.</strong>
                            </td>
                            <td class="border border-gray-400 p-2 text-center font-bold" style="background-color: #f9fafb;">
                                <div id="overallGrandTotal">ì˜¤ë¥˜</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>


        </div>
    </div>

    <!-- Firebase ì„¤ì • ëª¨ë‹¬ -->
    <div id="firebaseModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <div class="modal-content" style="background: white; padding: 30px; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <h2 class="text-xl font-bold mb-4">ğŸ”§ Firebase ì„¤ì •</h2>
            <div id="savedSettingsInfo" class="hidden bg-green-100 text-green-800 p-3 rounded mb-4">
                ì €ì¥ëœ ì„¤ì •ì´ ìˆìŠµë‹ˆë‹¤. í•„ìš”ì‹œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.
            </div>
            <div class="form-group mb-4">
                <label for="firebaseApiKey" class="block font-weight-600 color-#374151 margin-bottom-8px">Firebase API Key:</label>
                <input type="password" id="firebaseApiKey" placeholder="Firebase API Key ì…ë ¥" class="w-full p-3 border-2 border-gray-300 rounded">
            </div>
            <div class="form-group mb-6">
                <label for="firebaseProjectId" class="block font-weight-600 color-#374151 margin-bottom-8px">Firebase Project ID:</label>
                <input type="text" id="firebaseProjectId" placeholder="Project ID ì…ë ¥" class="w-full p-3 border-2 border-gray-300 rounded">
            </div>
            <div class="flex gap-3">
                <button onclick="saveFirebaseSettings()" class="btn btn-primary flex-1" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white;">ì„¤ì • ì €ì¥</button>
                <button onclick="clearFirebaseSettings()" class="btn flex-1" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; background: #ef4444; color: white;">ì„¤ì • ì‚­ì œ</button>
            </div>
        </div>
    </div>

    <!-- ì ìˆ˜ ì¡°ì • ëª¨ë‹¬ -->
    <div id="scoreModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
        <div class="modal-content" style="background: white; padding: 30px; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <h2 class="text-xl font-bold mb-4">ğŸ“Š ì ìˆ˜ ì¡°ì •</h2>

            <div class="mb-4">
                <label class="block font-weight-600 color-#374151 margin-bottom-8px">í˜„ì¬ ê¸°ë³¸ ì ìˆ˜:</label>
                <div id="currentScore" class="text-2xl font-bold text-blue-600 mb-4">10</div>
            </div>

            <div class="mb-4" id="libraryGuideSection" style="display: none;">
                <label for="libraryGuide" class="block font-weight-600 color-#374151 margin-bottom-8px">ë„ì„œê´€ì§€ë„:</label>
                <div class="flex items-center">
                    <input type="checkbox" id="libraryGuide" class="mr-2">
                    <span>ë„ì„œê´€ì§€ë„ ë‹´ë‹¹ (+0.2ì )</span>
                </div>
            </div>

            <div class="mb-4" id="semesterHoursSection" style="display: none;">
                <div class="flex items-center mb-3">
                    <input type="checkbox" id="differentSemesters" class="mr-2">
                    <span>1,2í•™ê¸° ì‹œìˆ˜ê°€ ë‹¤ë¥¸ê°€ìš”?</span>
                </div>
                <div id="semesterInputs" style="display: none;">
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <label for="semester1Hours" class="block text-sm font-medium mb-1">1í•™ê¸° ì‹œìˆ˜:</label>
                            <input type="number" id="semester1Hours" min="0" max="25" step="0.5" class="w-full p-2 border border-gray-300 rounded" placeholder="1í•™ê¸°">
                        </div>
                        <div>
                            <label for="semester2Hours" class="block text-sm font-medium mb-1">2í•™ê¸° ì‹œìˆ˜:</label>
                            <input type="number" id="semester2Hours" min="0" max="25" step="0.5" class="w-full p-2 border border-gray-300 rounded" placeholder="2í•™ê¸°">
                        </div>
                    </div>
                    <div class="text-sm text-blue-600 mb-2">
                        í‰ê·  ì‹œìˆ˜: <span id="averageHours">0</span>ì‹œê°„
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <label for="absentMonths" class="block font-weight-600 color-#374151 margin-bottom-8px">ë¯¸ê·¼ë¬´ ì›”ìˆ˜:</label>
                <input type="number" id="absentMonths" min="0" max="12" value="0" class="w-full p-3 border-2 border-gray-300 rounded" placeholder="ë¯¸ê·¼ë¬´ ì›”ìˆ˜ ì…ë ¥">
            </div>

            <div class="mb-4">
                <label class="block font-weight-600 color-#374151 margin-bottom-8px">ê°ì  ê³„ì‚°:</label>
                <div id="deductionText" class="text-sm text-gray-600 mb-2">ê°ì  = ë¯¸ê·¼ë¬´ ì›”ìˆ˜ Ã— 0.1</div>
                <div id="deductionAmount" class="text-lg font-medium text-red-600">0</div>
            </div>

            <div class="mb-6">
                <label class="block font-weight-600 color-#374151 margin-bottom-8px">ìµœì¢… ì ìˆ˜:</label>
                <div id="finalScore" class="text-2xl font-bold text-green-600">10</div>
            </div>

            <div class="flex gap-3">
                <button onclick="applyScoreAdjustment()" class="btn btn-primary flex-1" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white;">ì ìš©</button>
                <button onclick="closeScoreModal()" class="btn flex-1" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; background: #6b7280; color: white;">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        // ì ìˆ˜ ì¡°ì • ëª¨ë‹¬ ê´€ë ¨ ë³€ìˆ˜
        let currentScoreType = '';

        // ê° í•­ëª©ë³„ ì¡°ì •ì‚¬í•­ ì¶”ì  ê°ì²´
        const adjustmentHistory = {
            learning: { absentMonths: 0, libraryGuide: false, differentSemesters: false, semester1: 0, semester2: 0 },
            lifeGuidance: { absentMonths: 0, libraryGuide: false, differentSemesters: false, semester1: 0, semester2: 0 },
            violencePrevention: { absentMonths: 0, libraryGuide: false, differentSemesters: false, semester1: 0, semester2: 0 },
            workPerformance: { absentMonths: 0, libraryGuide: false, differentSemesters: false, semester1: 0, semester2: 0 }
        };

        // ì‹œìˆ˜ì— ë”°ë¥¸ ì ìˆ˜ ê³„ì‚° í•¨ìˆ˜
        function getScoreFromHours(hours) {
            // ì‹œìˆ˜-ì ìˆ˜ ë§¤í•‘ í…Œì´ë¸” (í˜„ì¬ ì‹œìˆ˜ì— ë§ê²Œ ìˆ˜ì •)
            const scoreTable = [
                { hours: 24, score: 20 },
                { hours: 23, score: 19.5 },
                { hours: 22, score: 19 },
                { hours: 21, score: 18.5 },
                { hours: 20, score: 18 },
                { hours: 19, score: 17.5 },
                { hours: 18, score: 17 },
                { hours: 17, score: 16.5 },
                { hours: 16, score: 16 },
                { hours: 15, score: 15.5 },
                { hours: 14, score: 15 },
                { hours: 13, score: 14.5 },
                { hours: 12, score: 14 },
                { hours: 11, score: 13.5 }
            ];

            // ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ì‹œìˆ˜ê°€ ìˆëŠ”ì§€ í™•ì¸
            for (let i = 0; i < scoreTable.length; i++) {
                if (hours === scoreTable[i].hours) {
                    return scoreTable[i].score;
                }
            }

            // ì†Œìˆ˜ì  ì‹œìˆ˜ì¸ ê²½ìš° ì¤‘ê°„ ì ìˆ˜ ê³„ì‚°
            for (let i = 0; i < scoreTable.length - 1; i++) {
                const currentHours = scoreTable[i].hours;
                const nextHours = scoreTable[i + 1].hours;

                if (hours < currentHours && hours > nextHours) {
                    const currentScore = scoreTable[i].score;
                    const nextScore = scoreTable[i + 1].score;
                    return (currentScore + nextScore) / 2;
                }
            }

            // 24ì‹œê°„ ì´ˆê³¼ì¸ ê²½ìš° ìµœê³  ì ìˆ˜
            if (hours > 24) return 20;

            // 11ì‹œê°„ ë¯¸ë§Œì¸ ê²½ìš° ìµœì†Œ ì ìˆ˜
            if (hours < 11) return 13.5;

            // ê¸°íƒ€ ê²½ìš° ê°€ì¥ ê°€ê¹Œìš´ í•˜í•œì„  ì ìˆ˜
            for (let i = 0; i < scoreTable.length; i++) {
                if (hours >= scoreTable[i].hours) {
                    return scoreTable[i].score;
                }
            }

            return 13.5;
        }

        // ì ìˆ˜ ì¡°ì • ëª¨ë‹¬ ì—´ê¸°
        function openScoreModal(scoreType) {
            currentScoreType = scoreType;
            const modal = document.getElementById('scoreModal');
            const currentScoreDiv = document.getElementById('currentScore');
            const absentMonthsInput = document.getElementById('absentMonths');
            const libraryGuideSection = document.getElementById('libraryGuideSection');
            const libraryGuideCheckbox = document.getElementById('libraryGuide');

            // ì €ì¥ëœ ì¡°ì •ì‚¬í•­ìœ¼ë¡œ ëª¨ë‹¬ ìƒíƒœ ë³µì›
            const savedAdjustment = adjustmentHistory[scoreType];

            // ë¯¸ê·¼ë¬´ì›”ìˆ˜ ë³µì›
            absentMonthsInput.value = savedAdjustment.absentMonths;

            // ë„ì„œê´€ ì§€ë„ ê´€ë ¨ ì„¹ì…˜ ì´ˆê¸°í™”
            libraryGuideSection.style.display = 'none';
            libraryGuideCheckbox.checked = savedAdjustment.libraryGuide;

            const semesterHoursSection = document.getElementById('semesterHoursSection');
            if (semesterHoursSection) {
                semesterHoursSection.style.display = 'none';
                const differentSemestersCheckbox = document.getElementById('differentSemesters');
                const semester1Input = document.getElementById('semester1Hours');
                const semester2Input = document.getElementById('semester2Hours');
                if (differentSemestersCheckbox) {
                    differentSemestersCheckbox.checked = savedAdjustment.differentSemesters;
                }
                if (savedAdjustment.differentSemesters && document.getElementById('semesterInputs')) {
                    document.getElementById('semesterInputs').style.display = 'block';
                }
                if (semester1Input) semester1Input.value = savedAdjustment.semester1 || '';
                if (semester2Input) semester2Input.value = savedAdjustment.semester2 || '';
                if (document.getElementById('averageHours')) {
                    const avg = savedAdjustment.differentSemesters && savedAdjustment.semester1 && savedAdjustment.semester2
                        ? (parseFloat(savedAdjustment.semester1) + parseFloat(savedAdjustment.semester2)) / 2
                        : 0;
                    document.getElementById('averageHours').textContent = avg.toFixed(1);
                }
            }

            // í˜„ì¬ ì²´í¬ë°•ìŠ¤ ìƒíƒœì— ë”°ë¥¸ ê¸°ë³¸ ì ìˆ˜ ê³„ì‚°
            let baseScore = 0;
            if (scoreType === 'workPerformance') {
                const checkboxes = document.querySelectorAll('input[data-group="7"]:checked');
                if (checkboxes.length === 1) {
                    const selectedType = checkboxes[0].dataset.type;
                    baseScore = (selectedType === 'department_head') ? 10 : 9;
                }
            } else if (scoreType === 'violencePrevention') {
                const checkboxes = document.querySelectorAll('input[data-group="5"]:checked');
                if (checkboxes.length === 1) {
                    const selectedType = checkboxes[0].dataset.type;
                    switch(selectedType) {
                        case 'safety_guide': baseScore = 20; break;
                        case 'discipline': baseScore = 15; break;
                        case 'not_applicable': baseScore = 10; break;
                    }
                } else {
                    // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ í‘œì‹œëœ ì ìˆ˜ ì‚¬ìš© (ìˆë‹¤ë©´)
                    const currentDisplayedScore = document.getElementById('violencePreventionResult').textContent;
                    if (currentDisplayedScore && !isNaN(parseFloat(currentDisplayedScore)) &&
                        currentDisplayedScore !== 'ì˜¤ë¥˜' && currentDisplayedScore !== 'ì¤‘ë³µ' && currentDisplayedScore !== 'ë¯¸ì…ë ¥') {
                        baseScore = parseFloat(currentDisplayedScore);
                    }
                }
                libraryGuideSection.style.display = 'block';
            } else if (scoreType === 'lifeGuidance') {
                const checkboxes = document.querySelectorAll('input[data-group="4"]:checked');
                if (checkboxes.length === 1) {
                    const selectedType = checkboxes[0].dataset.type;
                    switch(selectedType) {
                        case 'homeroom': baseScore = 20; break;
                        case 'not_applicable': baseScore = 15; break;
                    }
                } else {
                    // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ í‘œì‹œëœ ì ìˆ˜ ì‚¬ìš© (ìˆë‹¤ë©´)
                    const currentDisplayedScore = document.getElementById('lifeGuidanceResult').textContent;
                    if (currentDisplayedScore && !isNaN(parseFloat(currentDisplayedScore)) &&
                        currentDisplayedScore !== 'ì˜¤ë¥˜' && currentDisplayedScore !== 'ì¤‘ë³µ' && currentDisplayedScore !== 'ë¯¸ì…ë ¥') {
                        baseScore = parseFloat(currentDisplayedScore);
                    }
                }
            } else if (scoreType === 'learning') {
                const checkboxes = document.querySelectorAll('input[data-group="1"]:checked');
                if (checkboxes.length === 1) {
                    // ìˆ˜ì—…ì‹œìˆ˜ëŠ” data-hours ì†ì„±ì—ì„œ ì ìˆ˜ë¥¼ ê³„ì‚°í•¨
                    const hours = parseFloat(checkboxes[0].dataset.hours);
                    if (!isNaN(hours)) {
                        baseScore = getScoreFromHours(hours);
                    }
                } else {
                    // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ í‘œì‹œëœ ì ìˆ˜ ì‚¬ìš© (ìˆë‹¤ë©´)
                    const currentDisplayedScore = document.getElementById('learningResult').textContent;
                    if (currentDisplayedScore && !isNaN(parseFloat(currentDisplayedScore)) &&
                        currentDisplayedScore !== 'ì˜¤ë¥˜' && currentDisplayedScore !== 'ì¤‘ë³µ' && currentDisplayedScore !== 'ë¯¸ì…ë ¥') {
                        baseScore = parseFloat(currentDisplayedScore);
                    }
                }

                // ìˆ˜ì—…ì‹œìˆ˜ì˜ ê²½ìš° í•™ê¸°ë³„ ì‹œìˆ˜ ì„¹ì…˜ í‘œì‹œ
                if (semesterHoursSection) {
                    semesterHoursSection.style.display = 'block';
                }
            }

            // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ê²°ê³¼ì—ì„œ ì ìˆ˜ ì¶”ì¶œ ì‹œë„
            if (baseScore === 0) {
                let resultElementId;
                switch(scoreType) {
                    case 'workPerformance': resultElementId = 'workPerformanceResult'; break;
                    case 'violencePrevention': resultElementId = 'violencePreventionResult'; break;
                    case 'lifeGuidance': resultElementId = 'lifeGuidanceResult'; break;
                    case 'learning': resultElementId = 'learningResult'; break;
                }

                if (resultElementId) {
                    const currentDisplayedScore = document.getElementById(resultElementId).textContent;
                    if (currentDisplayedScore && !isNaN(parseFloat(currentDisplayedScore)) &&
                        currentDisplayedScore !== 'ì˜¤ë¥˜' && currentDisplayedScore !== 'ì¤‘ë³µ' && currentDisplayedScore !== 'ë¯¸ì…ë ¥') {
                        baseScore = parseFloat(currentDisplayedScore);
                    }
                }
            }

            currentScoreDiv.textContent = baseScore;
            updateScoreCalculation();

            modal.style.display = 'flex';
        }

        // ì ìˆ˜ ì¡°ì • ëª¨ë‹¬ ë‹«ê¸°
        function closeScoreModal() {
            document.getElementById('scoreModal').style.display = 'none';
        }

        // ì ìˆ˜ ê³„ì‚° ì—…ë°ì´íŠ¸
        function updateScoreCalculation() {
            let currentScore = parseFloat(document.getElementById('currentScore').textContent) || 0;
            const absentMonths = parseFloat(document.getElementById('absentMonths').value) || 0;
            const libraryGuide = document.getElementById('libraryGuide').checked;

            // ìˆ˜ì—…ì‹œìˆ˜ì˜ ê²½ìš° í•™ê¸°ë³„ ì‹œìˆ˜ê°€ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (currentScoreType === 'learning') {
                const differentSemesters = document.getElementById('differentSemesters').checked;
                if (differentSemesters) {
                    const semester1Hours = parseFloat(document.getElementById('semester1Hours').value) || 0;
                    const semester2Hours = parseFloat(document.getElementById('semester2Hours').value) || 0;

                    if (semester1Hours > 0 && semester2Hours > 0) {
                        const averageHours = (semester1Hours + semester2Hours) / 2;
                        const averageScore = getScoreFromHours(averageHours);
                        currentScore = averageScore;
                        document.getElementById('currentScore').textContent = averageScore.toFixed(2);
                        document.getElementById('averageHours').textContent = averageHours.toFixed(2);
                    }
                }
            }

            // ê°ì  ê³„ì‚° (ì—…ë¬´ì¶”ì§„ì‹¤ì : 0.1, êµë‚´ì™¸ì•ˆì „ìƒí™œì§€ë„: 0.2, ë‹´ì„: 0.1, ìˆ˜ì—…ì‹œìˆ˜: 0.2)
            const deductionRate = (currentScoreType === 'violencePrevention' || currentScoreType === 'learning') ? 0.2 : 0.1;
            const deduction = absentMonths * deductionRate;

            // ì¶”ê°€ì ìˆ˜ ê³„ì‚° (ë„ì„œê´€ì§€ë„: +0.2)
            const libraryBonus = (libraryGuide && currentScoreType === 'violencePrevention') ? 0.2 : 0;

            const finalScore = Math.max(0, currentScore + libraryBonus - deduction);

            document.getElementById('deductionAmount').textContent = deduction.toFixed(2);
            document.getElementById('finalScore').textContent = finalScore.toFixed(2);

            // ê°ì  ì„¤ëª… í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const deductionText = (currentScoreType === 'violencePrevention' || currentScoreType === 'learning')
                ? 'ê°ì  = ë¯¸ê·¼ë¬´ ì›”ìˆ˜ Ã— 0.2'
                : 'ê°ì  = ë¯¸ê·¼ë¬´ ì›”ìˆ˜ Ã— 0.1';
            document.getElementById('deductionText').textContent = deductionText;
        }

        // ì ìˆ˜ ì¡°ì • ì ìš©
        function applyScoreAdjustment() {
            const finalScore = parseFloat(document.getElementById('finalScore').textContent);
            const baseScore = parseFloat(document.getElementById('currentScore').textContent);
            const absentMonths = parseInt(document.getElementById('absentMonths').value) || 0;

            // í˜„ì¬ ì¡°ì •ì‚¬í•­ì„ ì¶”ì  ê°ì²´ì— ì €ì¥
            const libraryGuideCheckbox = document.getElementById('libraryGuide');
            const differentSemestersCheckbox = document.getElementById('differentSemesters');
            const semester1Input = document.getElementById('semester1Hours');
            const semester2Input = document.getElementById('semester2Hours');

            adjustmentHistory[currentScoreType] = {
                absentMonths: absentMonths,
                libraryGuide: libraryGuideCheckbox ? libraryGuideCheckbox.checked : false,
                differentSemesters: differentSemestersCheckbox ? differentSemestersCheckbox.checked : false,
                semester1: semester1Input ? parseFloat(semester1Input.value) || 0 : 0,
                semester2: semester2Input ? parseFloat(semester2Input.value) || 0 : 0
            };

            if (currentScoreType === 'workPerformance') {
                const resultDiv = document.getElementById('workPerformanceResult');
                resultDiv.textContent = finalScore.toFixed(2);
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';

                // ì¡°ì • ë‚´ì—­ í‘œì‹œ
                updateAdjustmentInfo('workPerformance', baseScore, finalScore, absentMonths, false);

                // ì´ì  ì¬ê³„ì‚°
                updateAssignedWorkTotalScore();
            } else if (currentScoreType === 'violencePrevention') {
                const resultDiv = document.getElementById('violencePreventionResult');
                resultDiv.textContent = finalScore.toFixed(2);
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';

                // ì¡°ì • ë‚´ì—­ í‘œì‹œ
                const libraryGuide = document.getElementById('libraryGuide').checked;
                updateAdjustmentInfo('violencePrevention', baseScore, finalScore, absentMonths, libraryGuide);

                // ì´ì  ì¬ê³„ì‚°
                updateLifeGuidanceTotalScore();
            } else if (currentScoreType === 'lifeGuidance') {
                const resultDiv = document.getElementById('lifeGuidanceResult');
                resultDiv.textContent = finalScore.toFixed(2);
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';

                // ì¡°ì • ë‚´ì—­ í‘œì‹œ
                updateAdjustmentInfo('lifeGuidance', baseScore, finalScore, absentMonths, false);

                // ì´ì  ì¬ê³„ì‚°
                updateLifeGuidanceTotalScore();
            } else if (currentScoreType === 'learning') {
                const resultDiv = document.getElementById('learningResult');
                resultDiv.textContent = finalScore.toFixed(2);
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';

                // ì¡°ì • ë‚´ì—­ í‘œì‹œ - ìˆ˜ì—…ì‹œìˆ˜ì˜ ê²½ìš° í•™ê¸°ë³„ ì‹œìˆ˜ ì •ë³´ë„ í¬í•¨
                const differentSemesters = document.getElementById('differentSemesters')?.checked || false;
                const semester1Hours = document.getElementById('semester1Hours')?.value || '';
                const semester2Hours = document.getElementById('semester2Hours')?.value || '';
                updateAdjustmentInfo('learning', baseScore, finalScore, absentMonths, false, differentSemesters, semester1Hours, semester2Hours);

                // ì´ì  ì¬ê³„ì‚°
                updateLearningTotalScore();
            }

            closeScoreModal();
        }

        // ë¯¸ê·¼ë¬´ ì›”ìˆ˜ ì…ë ¥ ì‹œ ì‹¤ì‹œê°„ ê³„ì‚°
        document.addEventListener('DOMContentLoaded', function() {
            const absentMonthsInput = document.getElementById('absentMonths');
            const libraryGuideCheckbox = document.getElementById('libraryGuide');
            const differentSemestersCheckbox = document.getElementById('differentSemesters');
            const semester1Input = document.getElementById('semester1Hours');
            const semester2Input = document.getElementById('semester2Hours');

            if (absentMonthsInput) {
                absentMonthsInput.addEventListener('input', updateScoreCalculation);
            }
            if (libraryGuideCheckbox) {
                libraryGuideCheckbox.addEventListener('change', updateScoreCalculation);
            }

            // í•™ê¸°ë³„ ì‹œìˆ˜ ê´€ë ¨ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            if (differentSemestersCheckbox) {
                differentSemestersCheckbox.addEventListener('change', function() {
                    const semesterInputs = document.getElementById('semesterInputs');
                    if (this.checked) {
                        semesterInputs.style.display = 'block';
                    } else {
                        semesterInputs.style.display = 'none';
                        semester1Input.value = '';
                        semester2Input.value = '';
                        document.getElementById('averageHours').textContent = '0';
                        // ê¸°ë³¸ ì ìˆ˜ë¡œ ë˜ëŒë¦¬ê¸°
                        const baseScore = parseFloat(document.getElementById('currentScore').getAttribute('data-base')) || 0;
                        document.getElementById('currentScore').textContent = baseScore;
                    }
                    updateScoreCalculation();
                });
            }

            if (semester1Input && semester2Input) {
                semester1Input.addEventListener('input', updateScoreCalculation);
                semester2Input.addEventListener('input', updateScoreCalculation);
            }
        });

        // ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateConnectionStatus(connected, message = '') {
            const statusElement = document.getElementById('connectionStatus');
            if (connected) {
                statusElement.textContent = 'ğŸŸ¢ ì—°ê²°ë¨';
                statusElement.className = 'px-3 py-1 rounded text-sm font-medium bg-green-100 text-green-800';
            } else {
                statusElement.textContent = message ? `ğŸ”´ ${message}` : 'ğŸ”´ ì—°ê²° ì•ˆë¨';
                statusElement.className = 'px-3 py-1 rounded text-sm font-medium bg-red-100 text-red-800';
            }
        }

        // Firebase ì„¤ì •
        function initializeFirebase() {
            const apiKey = localStorage.getItem('firebaseApiKey');
            const projectId = localStorage.getItem('firebaseProjectId');

            if (!apiKey || !projectId) {
                updateConnectionStatus(false, 'ì„¤ì • í•„ìš”');
                showFirebaseSettings();
                return false;
            }

            const firebaseConfig = {
                apiKey: apiKey,
                authDomain: `${projectId}.firebaseapp.com`,
                databaseURL: `https://${projectId}-default-rtdb.asia-southeast1.firebasedatabase.app`,
                projectId: projectId,
                storageBucket: `${projectId}.firebasestorage.app`,
                messagingSenderId: "383693605457",
                appId: "1:383693605457:web:b5c75a08b0fcef08188670"
            };

            try {
                firebase.initializeApp(firebaseConfig);
                window.database = firebase.database();
                window.evaluationRef = database.ref('evaluations');

                // ì—°ê²° í…ŒìŠ¤íŠ¸
                database.ref('.info/connected').on('value', (snapshot) => {
                    if (snapshot.val() === true) {
                        updateConnectionStatus(true);
                    } else {
                        updateConnectionStatus(false, 'ì—°ê²° ëŠì–´ì§');
                    }
                });

                return true;
            } catch (error) {
                console.error('Firebase ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                updateConnectionStatus(false, 'ì´ˆê¸°í™” ì‹¤íŒ¨');
                showFirebaseSettings();
                return false;
            }
        }

        // Firebase ì„¤ì • ê´€ë ¨ í•¨ìˆ˜ë“¤
        function showFirebaseSettings() {
            const modal = document.getElementById('firebaseModal');
            modal.style.display = 'flex';

            const apiKey = localStorage.getItem('firebaseApiKey');
            const projectId = localStorage.getItem('firebaseProjectId');
            const savedSettingsInfo = document.getElementById('savedSettingsInfo');

            if (apiKey && projectId) {
                document.getElementById('firebaseApiKey').value = apiKey;
                document.getElementById('firebaseProjectId').value = projectId;
                savedSettingsInfo.classList.remove('hidden');
            } else {
                savedSettingsInfo.classList.add('hidden');
            }
        }

        function saveFirebaseSettings() {
            const apiKey = document.getElementById('firebaseApiKey').value.trim();
            const projectId = document.getElementById('firebaseProjectId').value.trim();

            if (!apiKey || !projectId) {
                alert('API Keyì™€ Project IDë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            localStorage.setItem('firebaseApiKey', apiKey);
            localStorage.setItem('firebaseProjectId', projectId);

            try {
                if (firebase.apps.length > 0) {
                    firebase.apps.forEach(app => app.delete());
                }

                const success = initializeFirebase();
                if (success) {
                    document.getElementById('firebaseModal').style.display = 'none';
                    alert('Firebase ì„¤ì •ì´ ì €ì¥ë˜ê³  ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!\në‹¤ìŒ ì ‘ì†ë¶€í„°ëŠ” ìë™ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.');
                } else {
                    updateConnectionStatus(false, 'ì—°ê²° ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('Firebase ì„¤ì • ì˜¤ë¥˜:', error);
                alert('Firebase ì„¤ì •ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. API Keyì™€ Project IDë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }

        function clearFirebaseSettings() {
            if (confirm('ì €ì¥ëœ Firebase ì„¤ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('firebaseApiKey');
                localStorage.removeItem('firebaseProjectId');
                document.getElementById('firebaseApiKey').value = '';
                document.getElementById('firebaseProjectId').value = '';
                document.getElementById('savedSettingsInfo').classList.add('hidden');
                updateConnectionStatus(false, 'ì„¤ì • ì‚­ì œë¨');
                alert('ì €ì¥ëœ Firebase ì„¤ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        function loadFirebaseSettingsFromStorage() {
            const apiKey = localStorage.getItem('firebaseApiKey');
            const projectId = localStorage.getItem('firebaseProjectId');

            if (apiKey && projectId) {
                document.getElementById('firebaseApiKey').value = apiKey;
                document.getElementById('firebaseProjectId').value = projectId;
                return true;
            }
            return false;
        }



        function submitEvaluation() {
            // êµì‚¬ ì •ë³´ í™•ì¸
            const teacherName = document.getElementById('teacherName').value.trim();
            const teacherSubject = document.getElementById('teacherSubject').value.trim();
            const teacherDepartment = document.getElementById('teacherDepartment').value;

            if (!teacherName || !teacherSubject || !teacherDepartment) {
                alert('êµì‚¬ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì ìˆ˜ ê³„ì‚° í™•ì¸ - ì´í•©ê³„ì— ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ì œì¶œ ë¶ˆê°€
            const grandTotalText = document.getElementById('overallGrandTotal').textContent;

            if (grandTotalText === 'ì˜¤ë¥˜' || grandTotalText === 'ì¤‘ë³µ' || grandTotalText === 'ë¯¸ì…ë ¥') {
                alert('âŒ í‰ê°€ í•­ëª©ì— ì˜¤ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤.\n\në‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•´ì£¼ì„¸ìš”:\nâ€¢ ëª¨ë“  í•­ëª©ì´ ì²´í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸\nâ€¢ ì¤‘ë³µ ì²´í¬ëœ í•­ëª©ì´ ì—†ëŠ”ì§€ í™•ì¸\nâ€¢ ì˜¤ë¥˜ í‘œì‹œëœ í•­ëª©ì„ ìˆ˜ì •í•´ì£¼ì„¸ìš”');
                return;
            }

            const overallTotal = parseFloat(grandTotalText);
            if (isNaN(overallTotal) || overallTotal <= 0) {
                alert('í‰ê°€ ì ìˆ˜ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  í•­ëª©ì„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.');
                return;
            }


            // ê° ì˜ì—­ë³„ ì ìˆ˜ ìˆ˜ì§‘
            const learningResult = parseFloat(document.getElementById('learningResult').textContent) || 0;
            const multiGradeResult = parseFloat(document.getElementById('multiGradeResult').textContent) || 0;
            const classOpenResult = parseFloat(document.getElementById('classOpenResult').textContent) || 0;
            const lifeGuidanceResult = parseFloat(document.getElementById('lifeGuidanceResult').textContent) || 0;
            const violencePreventionResult = parseFloat(document.getElementById('violencePreventionResult').textContent) || 0;
            const professionalDevResult = parseFloat(document.getElementById('professionalDevResult').textContent) || 0;
            const workPerformanceResult = parseFloat(document.getElementById('workPerformanceResult').textContent) || 0;
            const subjectWorkResult = parseFloat(document.getElementById('subjectWorkResult').textContent) || 0;
            const workDifficultyResult = parseFloat(document.getElementById('workDifficultyResult').textContent) || 0;
            const committeeWorkResult = parseFloat(document.getElementById('committeeWorkResult').textContent) || 0;

            // ìœ„ì›íšŒ ì •ë³´ ìˆ˜ì§‘
            const committeeInputs = document.querySelectorAll('input[data-group="10"]');
            const committees = {};
            let committeeIndex = 1;

            committeeInputs.forEach(checkbox => {
                if (checkbox.checked) {
                    // í•´ë‹¹ ì²´í¬ë°•ìŠ¤ì™€ ê°™ì€ ì¤„ì˜ í…ìŠ¤íŠ¸ ì…ë ¥ë€ ì°¾ê¸°
                    const textInput = checkbox.parentElement.querySelector('input[type="text"]');
                    if (textInput && textInput.value.trim()) {
                        committees[`committee${committeeIndex}`] = textInput.value.trim();
                        committeeIndex++;
                    }
                }
            });


            const submissionData = {
                // êµì‚¬ ì •ë³´
                teacherName: teacherName,
                teacherSubject: teacherSubject,
                teacherDepartment: teacherDepartment,

                // ì ìˆ˜ ì •ë³´
                totalScore: overallTotal,
                maxScore: 100, // ì‹¤ì œ ìµœëŒ€ ì ìˆ˜ (í•™ìŠµì§€ë„30 + ìƒí™œì§€ë„30 + ì „ë¬¸ì„±ê°œë°œ10 + ë‹´ë‹¹ì—…ë¬´30)

                // ì˜ì—­ë³„ ì„¸ë¶€ ì ìˆ˜
                learningResult: learningResult,
                multiGradeResult: multiGradeResult,
                classOpenResult: classOpenResult,
                lifeGuidanceResult: lifeGuidanceResult,
                violencePreventionResult: violencePreventionResult,
                professionalDevResult: professionalDevResult,
                workPerformanceResult: workPerformanceResult,
                subjectWorkResult: subjectWorkResult,
                workDifficultyResult: workDifficultyResult,
                committeeWorkResult: committeeWorkResult,

                // ì˜ì—­ë³„ í•©ê³„ ì ìˆ˜
                learningTotalScore: learningResult + multiGradeResult + classOpenResult,
                lifeGuidanceTotalScore: lifeGuidanceResult + violencePreventionResult,
                professionalDevTotalScore: professionalDevResult,
                assignedWorkTotalScore: workPerformanceResult + subjectWorkResult + workDifficultyResult + committeeWorkResult,

                // ìœ„ì›íšŒ ì •ë³´ ì¶”ê°€
                ...committees,

                submittedAt: new Date().toISOString()
            };

            // Firebaseì— ì €ì¥
            if (window.evaluationRef) {
                evaluationRef.push(submissionData)
                    .then(() => {
                        alert('í‰ê°€ê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        resetForm();
                    })
                    .catch((error) => {
                        console.error('ì œì¶œ ì˜¤ë¥˜:', error);
                        alert('ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                    });
            } else {
                alert('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }

        function resetForm() {
            // êµì‚¬ ì •ë³´ ì´ˆê¸°í™”
            document.getElementById('teacherName').value = '';
            document.getElementById('teacherSubject').value = '';
            document.getElementById('teacherDepartment').value = '';

            // ëª¨ë“  ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            // ë°°ê²½ìƒ‰ ì´ˆê¸°í™”
            document.querySelectorAll('.bg-yellow-200').forEach(element => {
                element.classList.remove('bg-yellow-200', 'rounded', 'px-1');
            });

            // ì ìˆ˜ ì´ˆê¸°í™”
            updateLearningScore();
            updateMultiGradeScore();
            updateClassOpenScore();
            updateLearningTotalScore();
            updateLifeGuidanceScore();
            updateViolencePreventionScore();
            updateLifeGuidanceTotalScore();
            updateProfessionalDevScore();
            updateAssignedWorkTotalScore();
        }

        // ì²´í¬ë°•ìŠ¤ ë¡œì§
        function updateLearningScore() {
            const checkboxes = document.querySelectorAll('input[data-group="1"]:checked');
            const resultDiv = document.getElementById('learningResult');

            // ëª¨ë“  ì²´í¬ë°•ìŠ¤ ì„ íƒ í•´ì œ
            document.querySelectorAll('input[data-group="1"]').forEach(checkbox => {
                checkbox.disabled = false;
            });

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
            } else {
                const selectedHours = parseFloat(checkboxes[0].dataset.hours);
                let score = 0;

                // ì²« ë²ˆì§¸ êµ¬ê°„ (24~17.5)
                if (selectedHours >= 17.5 && selectedHours <= 24) {
                    score = 20 - (24 - selectedHours) * 0.5;
                }
                // ë‘ ë²ˆì§¸ êµ¬ê°„ (17~11)
                else if (selectedHours >= 11 && selectedHours <= 17) {
                    score = 16.5 - (17 - selectedHours) * 0.5;
                }

                resultDiv.textContent = score.toFixed(2);
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
            }

            updateTotalScore();
        }

        // ë‹¤í•™ë…„ì§€ë„ ì ìˆ˜ ê³„ì‚°
        function updateMultiGradeScore() {
            const checkboxes = document.querySelectorAll('input[data-group="2"]:checked');
            const resultDiv = document.getElementById('multiGradeResult');

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else {
                const selectedType = checkboxes[0].dataset.type;
                let score = 0;

                if (selectedType === 'both') {
                    score = 5;
                } else if (selectedType === 'single') {
                    score = 4.5;
                } else if (selectedType === 'none') {
                    score = 4;
                }

                resultDiv.textContent = score.toString();
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
                return score;
            }
        }

        // ìˆ˜ì—…ê³µê°œ ì ìˆ˜ ê³„ì‚°
        function updateClassOpenScore() {
            const checkboxes = document.querySelectorAll('input[data-group="3"]:checked');
            const resultDiv = document.getElementById('classOpenResult');

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else {
                const selectedType = checkboxes[0].dataset.type;
                let score = 0;

                if (selectedType === 'school') {
                    score = 5;
                } else if (selectedType === 'internal') {
                    score = 4.5;
                } else if (selectedType === 'parent') {
                    score = 4.3;
                } else if (selectedType === 'none') {
                    score = 4;
                }

                resultDiv.textContent = score.toString();
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
                return score;
            }
        }

        function updateLearningTotalScore() {
            // ìˆ˜ì—…ì‹œìˆ˜ ì ìˆ˜ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ë™ ì¡°ì •ëœ ê²½ìš° ê·¸ ê°’ ì‚¬ìš©)
            const learningResultDiv = document.getElementById('learningResult');
            let learningResult;

            if (learningResultDiv.textContent &&
                !isNaN(parseFloat(learningResultDiv.textContent)) &&
                learningResultDiv.textContent !== 'ì˜¤ë¥˜' &&
                learningResultDiv.textContent !== 'ì¤‘ë³µ' &&
                learningResultDiv.textContent !== 'ë¯¸ì…ë ¥') {
                // ì´ë¯¸ ìˆ˜ë™ìœ¼ë¡œ ì¡°ì •ëœ ì ìˆ˜ê°€ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ì‚¬ìš©
                learningResult = learningResultDiv.textContent;
            } else {
                // ìë™ ê³„ì‚°ëœ ì ìˆ˜ ì‚¬ìš©
                learningResult = learningResultDiv.textContent;
            }
            const multiGradeScore = updateMultiGradeScore();
            const classOpenScore = updateClassOpenScore();
            const learningTotalResultDiv = document.getElementById('learningTotalResult');

            let learningTotal = 0;
            let hasError = false;

            // ìˆ˜ì—…ì‹œìˆ˜ ì ìˆ˜ í™•ì¸
            if (learningResult === 'ì˜¤ë¥˜' || learningResult === 'ì¤‘ë³µ' || learningResult === 'ë¯¸ì…ë ¥') {
                hasError = true;
            } else {
                const learningScore = parseFloat(learningResult);
                if (!isNaN(learningScore)) {
                    learningTotal += learningScore;
                } else {
                    hasError = true;
                }
            }

            // ë‹¤í•™ë…„ì§€ë„ ì ìˆ˜ í™•ì¸
            if (multiGradeScore <= 0) {
                hasError = true;
            } else {
                learningTotal += multiGradeScore;
            }

            // ìˆ˜ì—…ê³µê°œ ì ìˆ˜ í™•ì¸
            if (classOpenScore <= 0) {
                hasError = true;
            } else {
                learningTotal += classOpenScore;
            }

            // í•™ìŠµì§€ë„ ì´ì  í‘œì‹œ
            if (hasError) {
                learningTotalResultDiv.textContent = 'ì˜¤ë¥˜';
                learningTotalResultDiv.style.color = 'yellow';
                learningTotalResultDiv.closest('td').style.backgroundColor = 'red';
            } else {
                learningTotalResultDiv.textContent = learningTotal.toFixed(2);
                learningTotalResultDiv.style.color = 'black';
                learningTotalResultDiv.closest('td').style.backgroundColor = 'transparent';
            }

            updateTotalScore();
        }

        function updateWorkPerformanceScore() {
            const checkboxes = document.querySelectorAll('input[data-group="7"]:checked');
            const resultDiv = document.getElementById('workPerformanceResult');

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else {
                const selectedType = checkboxes[0].dataset.type;
                let score = 0;

                if (selectedType === 'department_head') {
                    score = 10;
                } else if (selectedType === 'not_applicable') {
                    score = 9;
                }

                resultDiv.textContent = score.toString();
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
                return score;
            }
        }

        function updateSubjectWorkScore() {
            const checkboxes = document.querySelectorAll('input[data-group="8"]:checked');
            const resultDiv = document.getElementById('subjectWorkResult');

            let score = 4; // ê¸°ë³¸ì ìˆ˜

            checkboxes.forEach(checkbox => {
                const selectedType = checkbox.dataset.type;
                if (selectedType === 'club_teacher' || selectedType === 'subject_head') {
                    score += 0.5;
                }
            });

            resultDiv.textContent = score.toString();
            resultDiv.style.color = 'black';
            return score;
        }

        function updateWorkDifficultyScore() {
            const mainCheckboxes = document.querySelectorAll('input[data-group="9"]:checked');
            const eduCheckboxes = document.querySelectorAll('input[data-group="9_edu"]:checked');
            const resultDiv = document.getElementById('workDifficultyResult');

            let score = 0;

            // 1-4ë‹¨ê³„ ë©”ì¸ ì„ íƒ (ë‹¨ë… ì„ íƒë§Œ í—ˆìš©)
            if (mainCheckboxes.length > 1) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            }

            // ë©”ì¸ ì—…ë¬´ê³¤ë€ë„ ì ìˆ˜ ê³„ì‚°
            if (mainCheckboxes.length === 1) {
                const selectedType = mainCheckboxes[0].dataset.type;
                switch(selectedType) {
                    case 'level_1': score = 5.0; break;   // í•´ë‹¹ì
                    case 'level_2': score = 4.5; break;   // í•´ë‹¹ì
                    case 'level_3': score = 4.0; break;   // í•´ë‹¹ì
                    case 'level_4': score = 3.5; break;   // ê¸°ë³¸ì ìˆ˜
                    default: score = 0;
                }
            }
            // ë©”ì¸ í•­ëª©ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ë¯¸ì…ë ¥ ì²˜ë¦¬
            else {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            }

            // êµìœ¡í™œë™ í™œì„±í™” ì¶”ê°€ ì ìˆ˜ ê³„ì‚° (ë©”ì¸ê³¼ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™)
            if (eduCheckboxes.length > 0) {
                eduCheckboxes.forEach(checkbox => {
                    const selectedType = checkbox.dataset.type;
                    switch(selectedType) {
                        case 'school_award_1': score += 0.2; break;
                        case 'school_award_2': score += 0.2; break;
                        case 'external_project_1': score += 0.2; break;
                        case 'external_project_2': score += 0.2; break;
                        case 'pilot_school': score += 0.5; break;
                    }
                });
            }

            // ìµœëŒ€ 5ì  ì œí•œ
            if (score > 5) score = 5;

            // ë¶€ë™ì†Œìˆ˜ì  ì—°ì‚° ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ ì†Œìˆ˜ì  ì²«ì§¸ìë¦¬ê¹Œì§€ ë°˜ì˜¬ë¦¼
            score = Math.round(score * 10) / 10;

            resultDiv.textContent = score.toString();
            resultDiv.style.color = 'black';
            resultDiv.closest('td').style.backgroundColor = 'transparent';
            return score;
        }

        function updateCommitteeWorkScore() {
            const checkboxes = document.querySelectorAll('input[data-group="10"]:checked');
            const resultDiv = document.getElementById('committeeWorkResult');

            let score = 8.5; // ê¸°ë³¸ì ìˆ˜

            checkboxes.forEach(checkbox => {
                const selectedType = checkbox.dataset.type;
                if (selectedType === 'committee_1' || selectedType === 'committee_2' || selectedType === 'committee_3') {
                    score += 0.5;
                }
            });

            // ìµœëŒ€ 10ì  ì œí•œ (ê¸°ë³¸ì ìˆ˜ 8.5 + ìµœëŒ€ 1.5ì )
            if (score > 10) score = 10;

            resultDiv.textContent = score.toString();
            resultDiv.style.color = 'black';
            return score;
        }

        function updateLifeGuidanceScore() {
            const checkboxes = document.querySelectorAll('input[data-group="4"]:checked');
            const resultDiv = document.getElementById('lifeGuidanceResult');

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else {
                const selectedType = checkboxes[0].dataset.type;
                let score = 0;

                if (selectedType === 'applicable') {
                    score = 20;
                } else if (selectedType === 'not_applicable') {
                    score = 19;
                }

                resultDiv.textContent = score.toString();
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
                return score;
            }
        }

        function updateViolencePreventionScore() {
            const checkboxes = document.querySelectorAll('input[data-group="5"]:checked');
            const resultDiv = document.getElementById('violencePreventionResult');

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                return 0;
            } else {
                const selectedType = checkboxes[0].dataset.type;
                let score = 0;

                if (selectedType === 'department_head') {
                    score = 10;
                } else if (selectedType === 'homeroom_violence') {
                    score = 9.5;
                } else if (selectedType === 'over_50') {
                    score = 9;
                } else if (selectedType === 'under_50') {
                    score = 8.5;
                }

                resultDiv.textContent = score.toString();
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
                return score;
            }
        }

        function updateProfessionalDevScore() {
            const checkboxes = document.querySelectorAll('input[data-group="6"]:checked');
            const resultDiv = document.getElementById('professionalDevResult');
            const totalResultDiv = document.getElementById('professionalDevTotalResult');

            if (checkboxes.length === 0) {
                resultDiv.textContent = 'ë¯¸ì…ë ¥';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                totalResultDiv.textContent = 'ì˜¤ë¥˜';
                totalResultDiv.style.color = 'yellow';
                totalResultDiv.closest('td').style.backgroundColor = 'red';
                return 0;
            } else if (checkboxes.length >= 2) {
                resultDiv.textContent = 'ì¤‘ë³µ';
                resultDiv.style.color = 'red';
                resultDiv.closest('td').style.backgroundColor = 'yellow';
                totalResultDiv.textContent = 'ì˜¤ë¥˜';
                totalResultDiv.style.color = 'yellow';
                totalResultDiv.closest('td').style.backgroundColor = 'red';
                return 0;
            } else {
                const selectedType = checkboxes[0].dataset.type;
                let score = 0;

                if (selectedType === 'over_60') {
                    score = 10;
                } else if (selectedType === '45_to_60') {
                    score = 9;
                } else if (selectedType === '30_to_45') {
                    score = 8;
                } else if (selectedType === 'under_30') {
                    score = 7;
                }

                resultDiv.textContent = score.toString();
                resultDiv.style.color = 'black';
                resultDiv.closest('td').style.backgroundColor = 'transparent';
                totalResultDiv.textContent = score.toString();
                totalResultDiv.style.color = 'black';
                totalResultDiv.closest('td').style.backgroundColor = 'transparent';
                return score;
            }
        }

        function updateLifeGuidanceTotalScore() {
            // ë‹´ì„ ì ìˆ˜ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ë™ ì¡°ì •ëœ ê²½ìš° ê·¸ ê°’ ì‚¬ìš©)
            const lifeGuidanceResultDiv = document.getElementById('lifeGuidanceResult');
            let lifeGuidanceResult;

            if (lifeGuidanceResultDiv.textContent &&
                !isNaN(parseFloat(lifeGuidanceResultDiv.textContent)) &&
                lifeGuidanceResultDiv.textContent !== 'ì˜¤ë¥˜' &&
                lifeGuidanceResultDiv.textContent !== 'ì¤‘ë³µ' &&
                lifeGuidanceResultDiv.textContent !== 'ë¯¸ì…ë ¥') {
                // ì´ë¯¸ ìˆ˜ë™ìœ¼ë¡œ ì¡°ì •ëœ ì ìˆ˜ê°€ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ì‚¬ìš©
                lifeGuidanceResult = lifeGuidanceResultDiv.textContent;
            } else {
                // ìë™ ê³„ì‚°ëœ ì ìˆ˜ ì‚¬ìš©
                lifeGuidanceResult = lifeGuidanceResultDiv.textContent;
            }

            // êµë‚´ì™¸ ì•ˆì „ìƒí™œì§€ë„ ì ìˆ˜ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ë™ ì¡°ì •ëœ ê²½ìš° ê·¸ ê°’ ì‚¬ìš©)
            const violencePreventionResultDiv = document.getElementById('violencePreventionResult');
            let violencePreventionResult;

            if (violencePreventionResultDiv.textContent &&
                !isNaN(parseFloat(violencePreventionResultDiv.textContent)) &&
                violencePreventionResultDiv.textContent !== 'ì˜¤ë¥˜' &&
                violencePreventionResultDiv.textContent !== 'ì¤‘ë³µ' &&
                violencePreventionResultDiv.textContent !== 'ë¯¸ì…ë ¥') {
                // ì´ë¯¸ ìˆ˜ë™ìœ¼ë¡œ ì¡°ì •ëœ ì ìˆ˜ê°€ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ì‚¬ìš©
                violencePreventionResult = violencePreventionResultDiv.textContent;
            } else {
                // ìë™ ê³„ì‚°ëœ ì ìˆ˜ ì‚¬ìš©
                violencePreventionResult = violencePreventionResultDiv.textContent;
            }
            const lifeGuidanceTotalResultDiv = document.getElementById('lifeGuidanceTotalResult');

            let lifeGuidanceTotal = 0;
            let hasError = false;

            // ë‹´ì„ ì ìˆ˜ í™•ì¸
            if (lifeGuidanceResult === 'ì˜¤ë¥˜' || lifeGuidanceResult === 'ì¤‘ë³µ' || lifeGuidanceResult === 'ë¯¸ì…ë ¥') {
                hasError = true;
            } else {
                const lifeScore = parseFloat(lifeGuidanceResult);
                if (!isNaN(lifeScore)) {
                    lifeGuidanceTotal += lifeScore;
                } else {
                    hasError = true;
                }
            }

            // êµë‚´ì™¸ì•ˆì „ìƒí™œì§€ë„ ì ìˆ˜ í™•ì¸
            if (violencePreventionResult === 'ì˜¤ë¥˜' || violencePreventionResult === 'ì¤‘ë³µ' || violencePreventionResult === 'ë¯¸ì…ë ¥') {
                hasError = true;
            } else {
                const violenceScore = parseFloat(violencePreventionResult);
                if (!isNaN(violenceScore)) {
                    lifeGuidanceTotal += violenceScore;
                } else {
                    hasError = true;
                }
            }

            // ìƒí™œì§€ë„ ì´ì  í‘œì‹œ
            if (hasError) {
                lifeGuidanceTotalResultDiv.textContent = 'ì˜¤ë¥˜';
                lifeGuidanceTotalResultDiv.style.color = 'yellow';
                lifeGuidanceTotalResultDiv.closest('td').style.backgroundColor = 'red';
            } else {
                lifeGuidanceTotalResultDiv.textContent = lifeGuidanceTotal.toFixed(2);
                lifeGuidanceTotalResultDiv.style.color = 'black';
                lifeGuidanceTotalResultDiv.closest('td').style.backgroundColor = 'transparent';
            }

            updateTotalScore();
        }

        function updateAssignedWorkTotalScore() {
            // ì—…ë¬´ì¶”ì§„ì‹¤ì  ì ìˆ˜ëŠ” í•­ìƒ ì²´í¬ë°•ìŠ¤ ìƒíƒœë¥¼ ë¨¼ì € í™•ì¸
            let workPerformanceScore = updateWorkPerformanceScore();

            // ë§Œì•½ ìˆ˜ë™ ì¡°ì •ëœ ì ìˆ˜ê°€ ìˆë‹¤ë©´ (ëª¨ë‹¬ì—ì„œ ì¡°ì •ëœ ê²½ìš°)
            // ì¡°ì • ë‚´ì—­ì´ í‘œì‹œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            const adjustmentInfo = document.getElementById('workPerformanceAdjustmentInfo');
            const workPerformanceResultDiv = document.getElementById('workPerformanceResult');

            if (adjustmentInfo && adjustmentInfo.style.display === 'block' && adjustmentInfo.innerHTML.trim() !== '') {
                // ì¡°ì • ë‚´ì—­ì´ ìˆìœ¼ë©´ í˜„ì¬ í‘œì‹œëœ ì ìˆ˜ ì‚¬ìš© (ëª¨ë‹¬ì—ì„œ ì¡°ì •ëœ ì ìˆ˜)
                if (workPerformanceResultDiv.textContent &&
                    !isNaN(parseFloat(workPerformanceResultDiv.textContent)) &&
                    workPerformanceResultDiv.textContent !== 'ì˜¤ë¥˜' &&
                    workPerformanceResultDiv.textContent !== 'ì¤‘ë³µ' &&
                    workPerformanceResultDiv.textContent !== 'ë¯¸ì…ë ¥') {
                    workPerformanceScore = parseFloat(workPerformanceResultDiv.textContent);
                }
            }

            const subjectWorkScore = updateSubjectWorkScore();
            const workDifficultyScore = updateWorkDifficultyScore();
            const committeeWorkScore = updateCommitteeWorkScore();
            const assignedWorkTotalResultDiv = document.getElementById('assignedWorkTotalResult');

            // ê° í•˜ìœ„ í•­ëª©ì˜ ìƒíƒœ í™•ì¸
            const workPerformanceResult = document.getElementById('workPerformanceResult').textContent;
            const subjectWorkResult = document.getElementById('subjectWorkResult').textContent;
            const workDifficultyResult = document.getElementById('workDifficultyResult').textContent;
            const committeeWorkResult = document.getElementById('committeeWorkResult').textContent;

            // ë¯¸ì…ë ¥ì´ë‚˜ ì¤‘ë³µì´ ìˆëŠ”ì§€ í™•ì¸
            const hasError = [workPerformanceResult, subjectWorkResult, workDifficultyResult, committeeWorkResult]
                .some(result => result === 'ë¯¸ì…ë ¥' || result === 'ì¤‘ë³µ' || result === 'ì˜¤ë¥˜');

            if (hasError) {
                assignedWorkTotalResultDiv.textContent = 'ì˜¤ë¥˜';
                assignedWorkTotalResultDiv.style.color = 'yellow';
                assignedWorkTotalResultDiv.closest('td').style.backgroundColor = 'red';
            } else {
                const assignedWorkTotal = workPerformanceScore + subjectWorkScore + workDifficultyScore + committeeWorkScore;
                assignedWorkTotalResultDiv.textContent = assignedWorkTotal.toFixed(2);
                assignedWorkTotalResultDiv.style.color = 'black';
                assignedWorkTotalResultDiv.closest('td').style.backgroundColor = 'transparent';
            }

            updateTotalScore();
        }

        function updateGrandTotal() {
            // í•™ìŠµì§€ë„ ì´ì 
            const learningTotalResult = document.getElementById('learningTotalResult').textContent;
            // ìƒí™œì§€ë„ ì´ì 
            const lifeGuidanceTotalResult = document.getElementById('lifeGuidanceTotalResult').textContent;
            // ì „ë¬¸ì„±ê°œë°œ ì´ì 
            const professionalDevTotalResult = document.getElementById('professionalDevTotalResult').textContent;
            // ë‹´ë‹¹ì—…ë¬´ ì´ì 
            const assignedWorkTotalResult = document.getElementById('assignedWorkTotalResult').textContent;

            const grandTotalElement = document.getElementById('overallGrandTotal');
            let overallGrandTotal = 0;
            let hasError = false;

            // ê° ì˜ì—­ë³„ ì˜¤ë¥˜ ì²´í¬
            const sections = [
                learningTotalResult,
                lifeGuidanceTotalResult,
                professionalDevTotalResult,
                assignedWorkTotalResult
            ];

            // í•˜ë‚˜ë¼ë„ ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ì „ì²´ í•©ê³„ë„ ì˜¤ë¥˜ í‘œì‹œ
            for (let result of sections) {
                if (result === 'ì˜¤ë¥˜' || result === 'ì¤‘ë³µ' || result === 'ë¯¸ì…ë ¥') {
                    hasError = true;
                    break;
                }
            }

            if (hasError) {
                // ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ í•©ê³„ë„ ì˜¤ë¥˜ í‘œì‹œ
                grandTotalElement.textContent = 'ì˜¤ë¥˜';
                grandTotalElement.style.color = 'yellow';
                grandTotalElement.closest('td').style.backgroundColor = 'red';
                updateSubmitButtonState(true); // ë²„íŠ¼ ë¹„í™œì„±í™”
            } else {
                // ëª¨ë“  ì˜ì—­ì´ ì •ìƒì´ë©´ í•©ê³„ ê³„ì‚°
                const learningScore = parseFloat(learningTotalResult) || 0;
                const lifeGuidanceScore = parseFloat(lifeGuidanceTotalResult) || 0;
                const professionalDevScore = parseFloat(professionalDevTotalResult) || 0;
                const assignedWorkScore = parseFloat(assignedWorkTotalResult) || 0;

                overallGrandTotal = learningScore + lifeGuidanceScore + professionalDevScore + assignedWorkScore;

                if (overallGrandTotal > 0) {
                    grandTotalElement.textContent = overallGrandTotal.toFixed(2);
                    grandTotalElement.style.color = 'black';
                    grandTotalElement.closest('td').style.backgroundColor = 'transparent';
                    updateSubmitButtonState(false); // ë²„íŠ¼ í™œì„±í™”
                } else {
                    grandTotalElement.textContent = 'ì˜¤ë¥˜';
                    grandTotalElement.style.color = 'yellow';
                    grandTotalElement.closest('td').style.backgroundColor = 'red';
                    updateSubmitButtonState(true); // ë²„íŠ¼ ë¹„í™œì„±í™”
                }
            }
        }

        function updateTotalScore() {
            updateGrandTotal();
        }

        // ì¡°ì • ë‚´ì—­ í‘œì‹œ í•¨ìˆ˜
        function updateAdjustmentInfo(scoreType, baseScore, finalScore, absentMonths, libraryGuide = false, differentSemesters = false, semester1Hours = '', semester2Hours = '') {
            const infoElementId = scoreType + 'AdjustmentInfo';
            const infoElement = document.getElementById(infoElementId);

            if (!infoElement) return;

            // ì¡°ì •ì´ ìˆì—ˆëŠ”ì§€ í™•ì¸ (ê¸°ë³¸ ì ìˆ˜ì™€ ìµœì¢… ì ìˆ˜ê°€ ë‹¤ë¥¸ ê²½ìš°)
            if (Math.abs(baseScore - finalScore) < 0.01 && !libraryGuide && !differentSemesters && absentMonths === 0) {
                // ì¡°ì •ì´ ì—†ìœ¼ë©´ ì •ë³´ ìˆ¨ê¹€
                infoElement.style.display = 'none';
                return;
            }

            // ì¡°ì • ë‚´ì—­ ìƒì„±
            let adjustmentText = [];

            // ê° í•­ëª©ë³„ ê°„ë‹¨í•œ ì¡°ì • ë‚´ì—­
            if (scoreType === 'learning' && differentSemesters) {
                adjustmentText.push('ì‹œìˆ˜ë‹¤ë¦„');
            }

            if (libraryGuide && scoreType === 'violencePrevention') {
                adjustmentText.push('ë„ì„œê´€ì§€ë„');
            }

            if (absentMonths > 0) {
                adjustmentText.push(`ë¯¸ê·¼ë¬´ ${absentMonths}ê°œì›”`);
            }

            // ì •ë³´ í‘œì‹œ - ê° í•­ëª©ì„ ìƒˆ ì¤„ë¡œ ë¶„ë¦¬
            if (adjustmentText.length > 0) {
                infoElement.innerHTML = adjustmentText.join('<br>');
                infoElement.style.display = 'block';
                infoElement.style.color = '#2563eb'; // íŒŒë€ìƒ‰ìœ¼ë¡œ ê°•ì¡°
                infoElement.style.fontWeight = '500';
            } else {
                infoElement.style.display = 'none';
            }
        }

        // ì œì¶œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateSubmitButtonState(hasError) {
            const submitBtn = document.getElementById('submitBtn');
            if (!submitBtn) return;

            if (hasError) {
                // ì˜¤ë¥˜ê°€ ìˆì„ ë•Œ - ë²„íŠ¼ ë¹„í™œì„±í™” ë° ìŠ¤íƒ€ì¼ ë³€ê²½
                submitBtn.disabled = true;
                submitBtn.style.backgroundColor = '#059669'; // ì—ë©”ë„ë“œ ê·¸ë¦° (ë¹„í™œì„±í™”)
                submitBtn.style.cursor = 'not-allowed';
                submitBtn.style.opacity = '0.6';
                submitBtn.innerHTML = 'âŒ í‰ê°€ í•­ëª©ì„ í™•ì¸í•˜ì„¸ìš”';
                submitBtn.title = 'ëª¨ë“  í‰ê°€ í•­ëª©ì„ ì˜¬ë°”ë¥´ê²Œ ì™„ë£Œí•´ì•¼ ì œì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            } else {
                // ì •ìƒì¼ ë•Œ - ë²„íŠ¼ í™œì„±í™”
                submitBtn.disabled = false;
                submitBtn.style.backgroundColor = '#047857'; // ì§„í•œ ì—ë©”ë„ë“œ ê·¸ë¦° (í™œì„±í™”)
                submitBtn.style.cursor = 'pointer';
                submitBtn.style.opacity = '1';
                submitBtn.innerHTML = 'ğŸ“¤ í‰ê°€ ì œì¶œí•˜ê¸°';
                submitBtn.title = 'í‰ê°€ë¥¼ ì œì¶œí•©ë‹ˆë‹¤.';
            }
        }

        // ì²´í¬ë°•ìŠ¤ ë°°ê²½ìƒ‰ í† ê¸€ í•¨ìˆ˜
        function toggleCheckboxBackground(checkbox) {
            // êµìœ¡í™œë™í™œì„±í™” ì„¹ì…˜ (label êµ¬ì¡°)ì¸ì§€ í™•ì¸
            const parentLabel = checkbox.closest('label');
            if (parentLabel) {
                // label êµ¬ì¡°ì¸ ê²½ìš° labelì—ë§Œ ë°°ê²½ìƒ‰ ì ìš©
                if (checkbox.checked) {
                    parentLabel.classList.add('bg-yellow-200', 'rounded', 'px-1');
                    parentLabel.style.fontSize = '16px';
                    parentLabel.style.fontWeight = 'bold';
                } else {
                    parentLabel.classList.remove('bg-yellow-200', 'rounded', 'px-1');
                    parentLabel.style.fontSize = '';
                    parentLabel.style.fontWeight = '';
                }
            } else {
                // ê¸°ì¡´ div êµ¬ì¡°ì¸ ê²½ìš°
                const parentDiv = checkbox.closest('div');
                if (checkbox.dataset.hours) {
                    // ìˆ˜ì—…ì‹œìˆ˜ë„ ë‹¤ë¥¸ ì„¹ì…˜ë“¤ê³¼ ë™ì¼í•˜ê²Œ ê¸€ìë§Œ ë°°ê²½ìƒ‰ ì ìš©
                    if (checkbox.checked) {
                        parentDiv.classList.add('bg-yellow-200', 'rounded', 'px-1');
                        parentDiv.style.fontSize = '16px';
                        parentDiv.style.fontWeight = 'bold';
                    } else {
                        parentDiv.classList.remove('bg-yellow-200', 'rounded', 'px-1');
                        parentDiv.style.fontSize = '';
                        parentDiv.style.fontWeight = '';
                    }
                } else {
                    // ë‹¤ë¥¸ ì„¹ì…˜ë“¤: ê¸°ë³¸ ë°©ì‹ (ê¸€ë§Œ ë°°ê²½ìƒ‰)
                    if (checkbox.checked) {
                        parentDiv.classList.add('bg-yellow-200', 'rounded', 'px-1');
                        parentDiv.style.fontSize = '20px';
                        parentDiv.style.fontWeight = 'bold';
                    } else {
                        parentDiv.classList.remove('bg-yellow-200', 'rounded', 'px-1');
                        parentDiv.style.fontSize = '';
                        parentDiv.style.fontWeight = '';
                    }
                }
            }
        }

        // ëª¨ë“  ì²´í¬ë°•ìŠ¤ì— ë°°ê²½ìƒ‰ í† ê¸€ ì´ë²¤íŠ¸ ì¶”ê°€
        function addBackgroundToggleListeners() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                });
            });
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            // ìˆ˜ì—…ì‹œìˆ˜ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="1"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateLearningScore();
                    updateLearningTotalScore();
                });
            });

            // ë‹¤í•™ë…„ì§€ë„ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="2"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateMultiGradeScore();
                    updateLearningTotalScore();
                });
            });

            // ìˆ˜ì—…ê³µê°œ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="3"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateClassOpenScore();
                    updateLearningTotalScore();
                });
            });

            // ë‹´ì„ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="4"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateLifeGuidanceScore();
                    updateLifeGuidanceTotalScore();
                });
            });

            // êµë‚´ì™¸ì•ˆì „ìƒí™œì§€ë„ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="5"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateViolencePreventionScore();
                    updateLifeGuidanceTotalScore();
                });
            });

            // ì „ë¬¸ì„±ê°œë°œ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="6"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateProfessionalDevScore();
                    updateTotalScore();
                });
            });

            // ì—…ë¬´ì¶”ì§„ì‹¤ì  ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="7"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateAssignedWorkTotalScore();
                });
            });

            // êµê³¼ì—…ë¬´ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="8"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateAssignedWorkTotalScore();
                });
            });

            // ì—…ë¬´ê³¤ë€ë„ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="9"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateAssignedWorkTotalScore();
                });
            });

            // êµìœ¡í™œë™ í™œì„±í™” ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="9_edu"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateAssignedWorkTotalScore();
                });
            });

            // ê°ì¢…ìœ„ì›íšŒí™œë™ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('input[data-group="10"]').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    toggleCheckboxBackground(checkbox);
                    updateAssignedWorkTotalScore();
                });
            });

            updateLearningScore();
            updateMultiGradeScore();
            updateClassOpenScore();
            updateLearningTotalScore();
            updateLifeGuidanceScore();
            updateViolencePreventionScore();
            updateLifeGuidanceTotalScore();
            updateProfessionalDevScore();
            updateAssignedWorkTotalScore();

            // ì´ˆê¸° ì œì¶œ ë²„íŠ¼ ìƒíƒœ ì„¤ì • (ì²˜ìŒì—ëŠ” ë¹„í™œì„±í™”)
            updateSubmitButtonState(true);
        });

        // ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ í•¨ìˆ˜
        function captureScreenshot() {
            // ë²„íŠ¼ë“¤ì„ ì„ì‹œë¡œ ìˆ¨ê¸°ê¸°
            const buttons = document.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.style.visibility = 'hidden';
            });

            // ëª¨ë‹¬ë“¤ë„ ìˆ¨ê¸°ê¸°
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                modal.style.display = 'none';
            });


            // êµì‚¬ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            const teacherName = document.getElementById('teacherName').value || 'ì´ë¦„';
            const departmentSelect = document.getElementById('teacherDepartment');
            const department = departmentSelect.value ? departmentSelect.selectedOptions[0].text : 'ë¶€ì„œ';

            // html2canvasë¡œ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
            html2canvas(document.body, {
                scale: 2, // ê³ í™”ì§ˆì„ ìœ„í•œ ìŠ¤ì¼€ì¼ ì„¤ì •
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#f8fafc',
                width: window.innerWidth,
                height: document.body.scrollHeight
            }).then(canvas => {
                // ë²„íŠ¼ë“¤ ë‹¤ì‹œ ë³´ì´ê¸°
                buttons.forEach(btn => {
                    btn.style.visibility = 'visible';
                });

                // ìº”ë²„ìŠ¤ë¥¼ ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œ
                const link = document.createElement('a');
                link.download = `2025 ë‹¤ë©´í‰ê°€_${department}_${teacherName}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(error => {
                // ì—ëŸ¬ ë°œìƒ ì‹œ ë²„íŠ¼ë“¤ ë³µêµ¬
                buttons.forEach(btn => {
                    btn.style.visibility = 'visible';
                });
                console.error('ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                alert('ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        }

    </script>
</body>
</html>
